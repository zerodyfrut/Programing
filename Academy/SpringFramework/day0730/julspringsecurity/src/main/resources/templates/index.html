<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INDEX</title>
</head>

<body>
    <h1>인덱스 화면입니다.</h1>
    <div sec:authorize="isAnonymous()">
        <p>로그인하지 않은 사용자입니다.</p>
        <a th:href="@{/login}">로그인</a>
    </div>

    <div sec:authorize="!isAnonymous()">
        <div th:text="'ID : '+ ${#authentication.name}"></div>
        <div th:text="'성함 : '+ ${#authentication.principal.users.name}"></div>
        <div th:text="'등급 : '+${#authentication.principal.authorities}"></div>
        

        <form th:action="@{/logout}" method="post">
            <input type="submit" value="로그아웃" />
        </form>
    </div>

    </div>

    <div sec:authorize="hasAnyRole('MANAGER','ADMIN','MEMBER')">
        <a href="/member">멤버</a><br>
    </div>

    <div sec:authorize="hasAnyRole('MANAGER','ADMIN')">
        <a href="/manager">매니저</a><br>
    </div>
    <div sec:authorize="hasRole('ADMIN')">
        <a href="/admin">Admin</a><br><br>
    </div>

    <div sec:authorize="!hasAnyRole('MANAGER','ADMIN','MEMBER')">
        <a href="/insert">회원가입</a><br>
    </div>

    <div sec:authorize="hasAnyRole('MANAGER','ADMIN','MEMBER')">
        <a href="/api/questions">QNA 게시글</a><br>
    </div>
    
</body>

</html>